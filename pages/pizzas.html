<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="../imgs/logo2.png" type="image/x-icon">
    <!-- css link -->
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="../styles/pizzas.css">
    <!-- bootstrap links -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <title>Papa John's | Pizzas</title>
</head>

<body>
    <header>
        <nav class="topnav">
            <img src="../imgs/number.png" alt="num">
            <ul>
                <li><a href="#" data-translate="CAREERS">CAREERS</a></li>
                <li><a href="customer.html" data-translate="CONTACTS">CONTACTS</a></li>
            </ul>
            <img src="../imgs/arabic.png" alt="arabic" id="language-toggle">
        </nav>
        <nav class="subnav">
            <a href="../index.html">
                <img src="../imgs/logo.png" alt="logo" class="logo" id="main-logo">
            </a>
            <span class="menu-toggle" onclick="toggleMenu()">&#9776;</span>
            <ul id="menu">
                <li><a href="../index.html" data-translate="HOME">HOME</a></li>
                <li class="dropdown">
                    <a href="#" data-translate="Menu">Menu &#x25BC;</a>
                    <ul class="submenu">
                        <li><a href="../pages/promotions.html" data-translate="PROMOTIONS">PROMOTIONS</a></li>
                        <li><a href="../pages/pizzas.html" data-translate="PIZZAS">PIZZAS</a></li>
                        <li><a href="../pages/appetizers.html" data-translate="APPETIZERS">APPETIZERS</a></li>
                    </ul>
                </li>
                <li><a href="qulaity.html" data-translate="Quality">Quality</a></li>
                <li><a href="customer.html" data-translate="Customer Service">Customer Service</a></li>
            </ul>
            <div class="icons">
                <a href="../pages/cart.html" class="cart-icon position-relative">
                    <i class="fa-solid fa-cart-shopping fa-xl"></i>
                    <span id="cart-count"
                        class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-success">
                        0 <!-- Default value -->
                    </span>
                </a>
                <a href="../profile/profile.html" class="profile-icon"><i class="fa-regular fa-user fa-xl"></i></a>
            </div>
        </nav>
    </header>
    <br>
    <!-- content -->
    <div class="pizzas">
        <div class="container">
            <!-- Search and Title Row -->
            <div class="row align-items-center mb-4">
                <div class="col-md-8">
                    <h2 style="color: #079469;" data-translate="PIZZAS">PIZZAS</h2>
                </div>
                <div class="col-md-4 text-end">
                    <input type="text" id="search-input" class="form-control" placeholder="Search pizzas..."
                        data-translate-placeholder="Search pizzas...">
                </div>
            </div>

            <!-- Pizza Cards -->
            <div class="row" id="pizza-cards">
                <!-- Cards will be dynamically inserted here -->
            </div>

            <!-- No Results Placeholder -->
            <div id="no-results" class="text-center d-none">
                <img src="../imgs/emtycart.jpg" alt="No Results Found" class="mb-3" style="width: 250px; height: 250px;">
                <p class="text-muted" data-translate="No results found for">No results found for "<span
                        id="search-query"></span>"</p>
            </div>
        </div>
    </div>
    <!-- footer -->
    <footer class="footer text-white text-center py-4">
        <div class="container">
            <!-- Top Navigation Links -->
            <div class="row">
                <div class="col-12">
                    <ul class="footer-links list-inline">
                        <li class="list-inline-item"><a href="promotions.html"
                                data-translate="PROMOTIONS">PROMOTIONS</a></li>
                        <li class="list-inline-item"><a href="pizzas.html" data-translate="PIZZAS">PIZZAS</a></li>
                        <li class="list-inline-item"><a href="appetizers.html"
                                data-translate="APPETIZERS">APPETIZERS</a></li>
                    </ul>
                    <ul class="footer-links list-inline">
                        <li class="list-inline-item"><a href="../index.html" data-translate="HOME">HOME</a></li>
                        <li class="list-inline-item"><a href="qulaity.html" data-translate="QUALITY">QUALITY</a></li>
                        <li class="list-inline-item"><a href="#" data-translate="BRANCHES">BRANCHES</a></li>
                        <li class="list-inline-item"><a href="#" data-translate="CAREERS">CAREERS</a></li>
                        <li class="list-inline-item"><a href="customer.html" data-translate="CUSTOMER SERVICE">CUSTOMER
                                SERVICE</a></li>
                        <li class="list-inline-item"><a href="customer.html" data-translate="CONTACTS">CONTACTS</a></li>
                        <li class="list-inline-item"><a href="customer.html" data-translate="PRIVACY POLICY">PRIVACY
                                POLICY</a></li>
                    </ul>
                </div>
            </div>

            <!-- Social Media Icons -->
            <div class="social-icons my-3">
                <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
            </div>

            <!-- Copyright and Development Credit -->
            <div class="footer-text">
                <p class="mb-1" data-translate="© 2025 Papa John's Egypt">© 2025 Papa John's Egypt</p>
                <p data-translate="Web Development by">Web Development by </p>
                <a href="https://fadyadel-fady-adels-projects.vercel.app/" class="text-white">Fady Adel</a>
            </div>
        </div>
    </footer>
    <!-- Toast Notification -->
    <div id="toast" class="toast align-items-center text-white bg-success border-0" role="alert" aria-live="assertive"
        aria-atomic="true" style="position: fixed; bottom: 20px; right: 20px;">
        <div class="d-flex">
            <div class="toast-body">
                <span id="toast-message"></span>
            </div>
            <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"
                aria-label="Close"></button>
        </div>
    </div>
</body>

<!-- bootstrap links -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
    crossorigin="anonymous"></script>
<!-- FontAwesome for Icons -->
<script src="https://kit.fontawesome.com/858c0c4340.js" crossorigin="anonymous"></script>
<script src="../app.js"></script>

<script>
    let pizzasData = [];

    // Fetch the JSON data
    fetch('../data/pizzas.json')
        .then(response => response.json())
        .then(data => {
            pizzasData = data; // Store the data for filtering
            renderPizzas(data); // Render the initial pizza cards
        })
        .catch(error => {
            console.error('Error fetching data:', error);
        });

    // Function to render pizza cards
    function renderPizzas(pizzas) {
        const pizzaCardsContainer = document.getElementById('pizza-cards');
        pizzaCardsContainer.innerHTML = '';

        pizzas.forEach(pizza => {
            // Extract prices for Small, Medium, and Large
            const prices = pizza.price.split(', ');

            const card = `
                <div class="col-lg-3 col-md-6 mb-4">
                    <div class="card">
                        <img src="${pizza.image}" class="card-img-top" alt="${pizza.name}">
                        <div class="card-body">
                            <h5 class="card-title">${pizza.name}</h5>
                            <p class="card-text">${pizza.description}</p>
                            <div class="price-buttons">
                                <button class="btn price-btn" data-name="${pizza.name}" data-price="${prices[0]}" data-image="${pizza.image}" data-description="${pizza.description}">${prices[0]}</button>
                                <button class="btn price-btn" data-name="${pizza.name}" data-price="${prices[1]}" data-image="${pizza.image}" data-description="${pizza.description}">${prices[1]}</button>
                                <button class="btn price-btn" data-name="${pizza.name}" data-price="${prices[2]}" data-image="${pizza.image}" data-description="${pizza.description}">${prices[2]}</button>
                            </div>
                            <div class="order-now-container">
                                <a href="#" class="order-now-button" data-translate="Order Now">Order Now</a>
                                <a href="#" class="add-to-cart-button" data-name="${pizza.name}" data-price="${prices[0]}" data-image="${pizza.image}" data-description="${pizza.description}">
                                    <i class="fa-solid fa-cart-shopping"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            // Append the card to the container
            pizzaCardsContainer.innerHTML += card;
        });

        // Add event listeners to "Add to Cart" buttons
        const addToCartButtons = document.querySelectorAll('.add-to-cart-button');
        addToCartButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                event.preventDefault();
                const pizzaName = button.getAttribute('data-name');
                const pizzaPrice = button.getAttribute('data-price');
                const pizzaImage = button.getAttribute('data-image');
                const pizzaDescription = button.getAttribute('data-description');
                addToCart(pizzaName, pizzaPrice, pizzaImage, pizzaDescription);
            });
        });

        // Add event listeners to price buttons
        const priceButtons = document.querySelectorAll('.price-btn');
        priceButtons.forEach(button => {
            button.addEventListener('click', (event) => {
                event.preventDefault();
                const pizzaName = button.getAttribute('data-name');
                const pizzaPrice = button.getAttribute('data-price');
                const pizzaImage = button.getAttribute('data-image');
                const pizzaDescription = button.getAttribute('data-description');
                addToCart(pizzaName, pizzaPrice, pizzaImage, pizzaDescription);
            });
        });
    }

    function filterPizzas() {
        const searchQuery = document.getElementById('search-input').value.toLowerCase();

        const filteredPizzas = pizzasData.filter(pizza => {
            return pizza.name.toLowerCase().includes(searchQuery); // Filter only by name
        });

        // Render the filtered pizzas or show "no results" message
        if (filteredPizzas.length > 0) {
            renderPizzas(filteredPizzas);
            document.getElementById('no-results').classList.add('d-none');
        } else {
            document.getElementById('pizza-cards').innerHTML = ''; 
            document.getElementById('no-results').classList.remove('d-none'); 
            document.getElementById('search-query').textContent = searchQuery;
        }
    }

    // Add event listener for search
    document.getElementById('search-input').addEventListener('input', filterPizzas);

    // Function to add item to cart
    function addToCart(name, price, image, description) {
        let cart = JSON.parse(localStorage.getItem('cart')) || [];
        const item = { name, price, image, description };
        cart.push(item);
        localStorage.setItem('cart', JSON.stringify(cart));

        // Show toast notification
        showToast(`${name} added to cart!`);
    }

    // Function to show toast notification
    function showToast(message) {
        const toastElement = document.getElementById('toast');
        const toastMessage = document.getElementById('toast-message');

        // Set the toast message
        toastMessage.textContent = message;

        const toast = new bootstrap.Toast(toastElement, {
            autohide: true,
            delay: 3000
        });

        // Show the toast
        toast.show();
    }

    // Language Toggle Functionality
    document.addEventListener('DOMContentLoaded', function () {
        const languageToggle = document.getElementById('language-toggle');
        const mainLogo = document.getElementById('main-logo');
        let currentLanguage = 'en';

        languageToggle.addEventListener('click', function () {
            currentLanguage = currentLanguage === 'en' ? 'ar' : 'en';
            fetch('../data/translate.json')
                .then(response => response.json())
                .then(translations => {
                    const langData = translations[currentLanguage];
                    document.querySelectorAll('[data-translate]').forEach(element => {
                        const key = element.getAttribute('data-translate');
                        if (langData[key]) {
                            element.textContent = langData[key];
                        }
                    });

                    // Update placeholders
                    document.querySelectorAll('[data-translate-placeholder]').forEach(element => {
                        const key = element.getAttribute('data-translate-placeholder');
                        if (langData[key]) {
                            element.setAttribute('placeholder', langData[key]);
                        }
                    });

                    // Toggle the language toggle image
                    if (currentLanguage === 'ar') {
                        languageToggle.src = '../imgs/english.png';
                        mainLogo.src = '../imgs/logo-ar.png';
                    } else {
                        languageToggle.src = '../imgs/arabic.png';
                        mainLogo.src = '../imgs/logo.png';
                    }

                    // Update the direction of the body for RTL support
                    document.body.setAttribute('dir', currentLanguage === 'ar' ? 'rtl' : 'ltr');
                });
        });
    });
</script>

</html>